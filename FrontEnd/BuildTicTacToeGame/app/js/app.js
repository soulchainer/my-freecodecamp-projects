"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){!function(t){function n(e){var n=e.length,i="undefined"==typeof e?"undefined":_typeof(e);return m(i)||e===t?!1:1===e.nodeType&&n?!0:p(i)||0===n||"number"==typeof n&&n>0&&n-1 in e}function i(t,e){var n,i;this.originalEvent=t,i=function(t,e){"preventDefault"===t?this[t]=function(){return this.defaultPrevented=!0,e[t]()}:"stopImmediatePropagation"===t?this[t]=function(){return this.immediatePropagationStopped=!0,e[t]()}:m(e[t])?this[t]=function(){return e[t]()}:this[t]=e[t]};for(n in t)(t[n]||"function"==typeof t[n])&&i.call(this,n,t);y.extend(this,e,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var r,a=t.$,o=t.jBone,s=/^<(\w+)\s*\/?>$/,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=[].slice,h=[].splice,c=Object.keys,f=document,d=function(t){return"string"==typeof t},v=function(t){return t instanceof Object},m=function(t){return"[object Function]"==={}.toString.call(t)},p=function(t){return Array.isArray(t)},y=function(t,e){return new r.init(t,e)};y.noConflict=function(){return t.$=a,t.jBone=o,y},r=y.fn=y.prototype={init:function(t,e){var n,i,r,a;if(!t)return this;if(d(t)){if(i=s.exec(t))return this[0]=f.createElement(i[1]),this.length=1,v(e)&&this.attr(e),this;if((i=u.exec(t))&&i[1]){for(a=f.createDocumentFragment(),r=f.createElement("div"),r.innerHTML=t;r.lastChild;)a.appendChild(r.firstChild);return n=l.call(a.childNodes),y.merge(this,n)}if(y.isElement(e))return y(e).find(t);try{return n=f.querySelectorAll(t),y.merge(this,n)}catch(o){return this}}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?t():t instanceof y?t:y.makeArray(t,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},r.constructor=y,r.init.prototype=r,y.setId=function(e){var n=e.jid;e===t?n="window":void 0===e.jid&&(e.jid=n=++y._cache.jid),y._cache.events[n]||(y._cache.events[n]={})},y.getData=function(e){e=e instanceof y?e[0]:e;var n=e===t?"window":e.jid;return{jid:n,events:y._cache.events[n]}},y.isElement=function(t){return t&&t instanceof y||t instanceof HTMLElement||d(t)},y._cache={events:{},jid:0},r.pushStack=function(t){var e=y.merge(this.constructor(),t);return e},y.merge=function(t,e){for(var n=e.length,i=t.length,r=0;n>r;)t[i++]=e[r++];return t.length=i,t},y.contains=function(t,e){return t.contains(e)},y.extend=function(t){var e;return h.call(arguments,1).forEach(function(n){if(e=t,n)for(var i in n)e[i]=n[i]}),t},y.makeArray=function(t,e){var i=e||[];return null!==t&&(n(t)?y.merge(i,d(t)?[t]:t):i.push(t)),i},y.unique=function(t){if(null==t)return[];for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n];e.indexOf(r)<0&&e.push(r)}return e},y.Event=function(t,e){var n,i;return t.type&&!e&&(e=t,t=t.type),n=t.split(".").splice(1).join("."),i=t.split(".")[0],t=f.createEvent("Event"),t.initEvent(i,!0,!0),y.extend(t,{namespace:n,isDefaultPrevented:function(){return t.defaultPrevented}},e)},y.event={add:function(t,e,n,i,r){y.setId(t);var a,o,s,u=function(e){y.event.dispatch.call(t,e)},l=y.getData(t).events;for(e=e.split(" "),o=e.length;o--;)s=e[o],a=s.split(".")[0],l[a]=l[a]||[],l[a].length?u=l[a][0].fn:t.addEventListener&&t.addEventListener(a,u,!1),l[a].push({namespace:s.split(".").splice(1).join("."),fn:u,selector:r,data:i,originfn:n})},remove:function(t,e,n){var i,r,a=function(t,e,i,r,a){var o;(n&&a.originfn===n||!n)&&(o=a.fn),t[e][i].fn===o&&(t[e].splice(i,1),t[e].length||r.removeEventListener(e,o))},o=y.getData(t).events;if(o)return!e&&o?c(o).forEach(function(e){for(r=o[e],i=r.length;i--;)a(o,e,i,t,r[i])}):void e.split(" ").forEach(function(e){var n,s=e.split(".")[0],u=e.split(".").splice(1).join(".");if(o[s])for(r=o[s],i=r.length;i--;)n=r[i],(!u||u&&n.namespace===u)&&a(o,s,i,t,n);else u&&c(o).forEach(function(e){for(r=o[e],i=r.length;i--;)n=r[i],n.namespace.split(".")[0]===u.split(".")[0]&&a(o,e,i,t,n)})})},trigger:function(t,e){var n=[];d(e)?n=e.split(" ").map(function(t){return y.Event(t)}):(e=e instanceof Event?e:y.Event(e),n=[e]),n.forEach(function(e){e.type&&t.dispatchEvent&&t.dispatchEvent(e)})},dispatch:function(t){for(var e,n,r,a,o,s=0,u=0,l=this,h=y.getData(l).events[t.type],c=h.length,f=[],d=[];c>s;s++)f.push(h[s]);for(s=0,c=f.length;c>s&&~h.indexOf(f[s])&&(!a||!a.isImmediatePropagationStopped());s++)if(n=null,o={},r=f[s],r.data&&(o.data=r.data),r.selector){if(~(d=y(l).find(r.selector)).indexOf(t.target)&&(n=t.target)||l!==t.target&&l.contains(t.target)){if(!n)for(e=d.length,u=0;e>u;u++)d[u]&&d[u].contains(t.target)&&(n=d[u]);if(!n)continue;o.currentTarget=n,a=new i(t,o),t.namespace&&t.namespace!==r.namespace||r.originfn.call(n,a)}}else a=new i(t,o),t.namespace&&t.namespace!==r.namespace||r.originfn.call(l,a)}},r.on=function(t,e,n,i){var r=this.length,a=0;if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),!i)return this;for(;r>a;a++)y.event.add(this[a],t,i,n,e);return this},r.one=function(t){var e,n=arguments,i=0,r=this.length,a=l.call(n,1,n.length-1),o=l.call(n,-1)[0];for(e=function(e){var n=y(e);t.split(" ").forEach(function(t){var i=function r(i){n.off(t,r),o.call(e,i)};n.on.apply(n,[t].concat(a,i))})};r>i;i++)e(this[i]);return this},r.trigger=function(t){var e=0,n=this.length;if(!t)return this;for(;n>e;e++)y.event.trigger(this[e],t);return this},r.off=function(t,e){for(var n=0,i=this.length;i>n;n++)y.event.remove(this[n],t,e);return this},r.find=function(t){for(var e=[],n=0,i=this.length,r=function(n){m(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(t),function(t){e.push(t)})};i>n;n++)r(this[n]);return y(e)},r.get=function(t){return null!=t?0>t?this[t+this.length]:this[t]:l.call(this)},r.eq=function(t){return y(this[t])},r.parent=function(){for(var t,e=[],n=0,i=this.length;i>n;n++)!~e.indexOf(t=this[n].parentElement)&&t&&e.push(t);return y(e)},r.toArray=function(){return l.call(this)},r.is=function(){var t=arguments;return this.some(function(e){return e.tagName.toLowerCase()===t[0]})},r.has=function(){var t=arguments;return this.some(function(e){return e.querySelectorAll(t[0]).length})},r.add=function(t,e){return this.pushStack(y.unique(y.merge(this.get(),y(t,e))))},r.attr=function(t,e){var n,i=arguments,r=0,a=this.length;if(d(t)&&1===i.length)return this[0]&&this[0].getAttribute(t);for(2===i.length?n=function(n){n.setAttribute(t,e)}:v(t)&&(n=function(e){c(t).forEach(function(n){e.setAttribute(n,t[n])})});a>r;r++)n(this[r]);return this},r.removeAttr=function(t){for(var e=0,n=this.length;n>e;e++)this[e].removeAttribute(t);return this},r.val=function(t){var e=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;n>e;e++)this[e].value=t;return this},r.css=function(e,n){var i,r=arguments,a=0,o=this.length;if(d(e)&&1===r.length)return this[0]&&t.getComputedStyle(this[0])[e];for(2===r.length?i=function(t){t.style[e]=n}:v(e)&&(i=function(t){c(e).forEach(function(n){t.style[n]=e[n]})});o>a;a++)i(this[a]);return this},r.data=function(t,e){var n,i=arguments,r={},a=0,o=this.length,s=function(t,e,n){v(n)?(t.jdata=t.jdata||{},t.jdata[e]=n):t.dataset[e]=n},u=function(t){return"true"===t?!0:"false"===t?!1:t};if(0===i.length)return this[0].jdata&&(r=this[0].jdata),c(this[0].dataset).forEach(function(t){r[t]=u(this[0].dataset[t])},this),r;if(1===i.length&&d(t))return this[0]&&u(this[0].dataset[t]||this[0].jdata&&this[0].jdata[t]);for(1===i.length&&v(t)?n=function(e){c(t).forEach(function(n){s(e,n,t[n])})}:2===i.length&&(n=function(n){s(n,t,e)});o>a;a++)n(this[a]);return this},r.removeData=function(t){for(var e,n,i=0,r=this.length;r>i;i++)if(e=this[i].jdata,n=this[i].dataset,t)e&&e[t]&&delete e[t],delete n[t];else{for(t in e)delete e[t];for(t in n)delete n[t]}return this},r.addClass=function(t){for(var e=0,n=0,i=this.length,r=t?t.trim().split(/\s+/):[];i>e;e++)for(n=0,n=0;n<r.length;n++)this[e].classList.add(r[n]);return this},r.removeClass=function(t){for(var e=0,n=0,i=this.length,r=t?t.trim().split(/\s+/):[];i>e;e++)for(n=0,n=0;n<r.length;n++)this[e].classList.remove(r[n]);return this},r.toggleClass=function(t,e){var n=0,i=this.length,r="toggle";if(e===!0&&(r="add")||e===!1&&(r="remove"),t)for(;i>n;n++)this[n].classList[r](t);return this},r.hasClass=function(t){var e=0,n=this.length;if(t)for(;n>e;e++)if(this[e].classList.contains(t))return!0;return!1},r.html=function(t){var e,n=arguments;return 1===n.length&&void 0!==t?this.empty().append(t):0===n.length&&(e=this[0])?e.innerHTML:this},r.append=function(t){var e,n=0,i=this.length;for(d(t)&&u.exec(t)?t=y(t):v(t)||(t=document.createTextNode(t)),t=t instanceof y?t:y(t),e=function(e,n){t.forEach(function(t){n?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})};i>n;n++)e(this[n],n);return this},r.appendTo=function(t){return y(t).append(this),this},r.empty=function(){for(var t,e=0,n=this.length;n>e;e++)for(t=this[e];t.lastChild;)t.removeChild(t.lastChild);return this},r.remove=function(){var t,e=0,n=this.length;for(this.off();n>e;e++)t=this[e],delete t.jdata,t.parentNode&&t.parentNode.removeChild(t);return this},"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e&&"object"===_typeof(e.exports)?e.exports=y:"function"==typeof define&&define.amd?(define(function(){return y}),t.jBone=t.$=y):"object"===("undefined"==typeof t?"undefined":_typeof(t))&&"object"===_typeof(t.document)&&(t.jBone=t.$=y)}(window)},{}],2:[function(t,e,n){!function(){function e(t){var e=t[0];return e!==r?t.every(function(t){return t===e}):void 0}function n(){var t=new s;new u(t)}var i=t("jbone"),r="*",a=100,o=function(){function t(){_classCallCheck(this,t),this.squares=Array(9).fill(r),this.getReady()}return _createClass(t,[{key:"getReady",value:function(){for(var t=0;9>t;t++)this["$square"+t]=i("#square"+t),this["$square"+t].html("").removeAttr("disabled")}},{key:"makeMove",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(this.squares[t]=e,n){var i="X"===e?"Cross":"Circle",r='<img class="token-img" src="assets/images/'+e+'.svg" alt="'+i+'">';this["$square"+t].html(r).attr("disabled","")}}},{key:"undoMove",value:function(t){this.makeMove(t,r)}}]),t}(),s=function(){function t(){_classCallCheck(this,t),this.board=new o,this.rival={O:"X",X:"O"},this.turn=0,this.lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],this.cacheDom(),this.bindEvents()}return _createClass(t,[{key:"cacheDom",value:function(){this.$board=i("#board"),this.$square=i(".square"),this.$modal=i(".modal")}},{key:"bindEvents",value:function(){this.$square.on("click",this.handleMove.bind(this))}},{key:"enableBoard",value:function(){this.$board.removeClass("disabled")}},{key:"disableBoard",value:function(){this.$board.addClass("disabled")}},{key:"handleMove",value:function(t){var e=Number(t.currentTarget.dataset.square);this.board.makeMove.bind(this.board)(e,this.humanToken,!0),this.continueGame(this.humanToken,this.cpuPlayer)}},{key:"continueGame",value:function(t,e){if(this.isGameOver()){var n=this.getWinner();console.log(n?"Player "+n+" won.":"It was a tie."),window.setTimeout(this.reset.bind(this),800)}else e.bind(this)(this.rival[t])}},{key:"reset",value:function(){this.board=new o,this.turn=0,this.$modal.removeClass("hidden")}},{key:"getValidMoves",value:function(){var t=this.board.squares,e=function(e,n){return t[n]===r};return[].concat(_toConsumableArray(t.keys())).filter(e.bind(this))}},{key:"isGameOver",value:function(){return this.getWinner()||!this.getValidMoves().length}},{key:"getWinner",value:function(){var t=this,n=!0,i=!1,r=void 0;try{for(var a,o=this.lines[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.map(function(e){return t.board.squares[e]});if(e(u))return u[0]}}catch(l){i=!0,r=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw r}}return null}},{key:"evalFinalState",value:function(t,e){var n=this.getWinner();return n===t?a-e:n===this.rival[t]?-a+e:0}},{key:"minimax",value:function(t,e){var n=void 0,i=void 0,r=-a,o=!0,s=!1,u=void 0;try{for(var l,h=this.getValidMoves()[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var c=l.value;i=this.minValue(c,e,this.rival[t],-a,a),i>r&&(r=i,n=c)}}catch(f){s=!0,u=f}finally{try{!o&&h["return"]&&h["return"]()}finally{if(s)throw u}}return n}},{key:"maxValue",value:function(t,e,n,i,r){try{if(this.board.makeMove(t,n),this.isGameOver())return this.evalFinalState(n,e);var a=!0,o=!1,s=void 0;try{for(var u,l=this.getValidMoves()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var h=u.value;if(i=Math.max(i,this.minValue(h,e+1,this.rival[n],i,r)),i>=r)return r}}catch(c){o=!0,s=c}finally{try{!a&&l["return"]&&l["return"]()}finally{if(o)throw s}}return i}finally{this.board.undoMove(t)}}},{key:"minValue",value:function(t,e,n,i,r){try{if(this.board.makeMove(t,n),this.isGameOver())return this.evalFinalState(n,e);var a=!0,o=!1,s=void 0;try{for(var u,l=this.getValidMoves()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var h=u.value;if(r=Math.min(r,this.maxValue(h,e+1,this.rival[n],i,r)),i>=r)return i}}catch(c){o=!0,s=c}finally{try{!a&&l["return"]&&l["return"]()}finally{if(o)throw s}}return r}finally{this.board.undoMove(t)}}},{key:"cpuPlayer",value:function(t){console.time("cpu move"),this.disableBoard();var e=void 0;e=this.turn?this.minimax(t,this.turn):Math.floor(Math.random()*this.getValidMoves().length),this.board.makeMove(e,t,!0),console.timeEnd("cpu move"),this.continueGame(t,this.humanPlayer)}},{key:"humanPlayer",value:function(t){this.turn++,this.enableBoard()}},{key:"start",value:function(){"human"===this.playerOne?this.humanPlayer(this.humanToken):this.cpuPlayer(this.rival[this.humanToken])}}]),t}(),u=function(){function t(e){_classCallCheck(this,t),this.game=e,this.cacheDom(),this.bindEvents()}return _createClass(t,[{key:"cacheDom",value:function(){this.$tokens=i(".token"),this.$players=i(".player"),this.$start=i("#start-btn"),this.$modal=i(".modal")}},{key:"bindEvents",value:function(){this.$tokens.on("click",this.handleTokenSelection.bind(this)),this.$players.on("click",this.handlePlayerSelection.bind(this)),this.$start.on("click",this.handleStart.bind(this))}},{key:"handleTokenSelection",value:function(t){var e=i(t.currentTarget);e.hasClass("unselected")&&(this.$tokens.toggleClass("unselected"),this.token=e.attr("data-token"))}},{key:"handlePlayerSelection",value:function(t){var e=i(t.currentTarget);e.hasClass("unselected")&&(this.$players.toggleClass("unselected"),this.playerOne=e.attr("data-playerone"))}},{key:"handleStart",value:function(t){this.game.playerOne=this.playerOne||"human",this.game.humanToken=this.token||"X",this.$modal.addClass("hidden"),this.game.start()}}]),t}();n()}()},{jbone:1}]},{},[2]);
//# sourceMappingURL=app.js.map
