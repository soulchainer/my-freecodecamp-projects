"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){!function(t){function n(e){var n=e.length,r="undefined"==typeof e?"undefined":_typeof(e);return y(r)||e===t?!1:1===e.nodeType&&n?!0:p(r)||0===n||"number"==typeof n&&n>0&&n-1 in e}function r(t,e){var n,r;this.originalEvent=t,r=function(t,e){"preventDefault"===t?this[t]=function(){return this.defaultPrevented=!0,e[t]()}:"stopImmediatePropagation"===t?this[t]=function(){return this.immediatePropagationStopped=!0,e[t]()}:y(e[t])?this[t]=function(){return e[t]()}:this[t]=e[t]};for(n in t)(t[n]||"function"==typeof t[n])&&r.call(this,n,t);m.extend(this,e,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var i,a=t.$,o=t.jBone,s=/^<(\w+)\s*\/?>$/,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=[].slice,l=[].splice,c=Object.keys,f=document,d=function(t){return"string"==typeof t},v=function(t){return t instanceof Object},y=function(t){return"[object Function]"==={}.toString.call(t)},p=function(t){return Array.isArray(t)},m=function(t,e){return new i.init(t,e)};m.noConflict=function(){return t.$=a,t.jBone=o,m},i=m.fn=m.prototype={init:function(t,e){var n,r,i,a;if(!t)return this;if(d(t)){if(r=s.exec(t))return this[0]=f.createElement(r[1]),this.length=1,v(e)&&this.attr(e),this;if((r=u.exec(t))&&r[1]){for(a=f.createDocumentFragment(),i=f.createElement("div"),i.innerHTML=t;i.lastChild;)a.appendChild(i.firstChild);return n=h.call(a.childNodes),m.merge(this,n)}if(m.isElement(e))return m(e).find(t);try{return n=f.querySelectorAll(t),m.merge(this,n)}catch(o){return this}}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?t():t instanceof m?t:m.makeArray(t,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},i.constructor=m,i.init.prototype=i,m.setId=function(e){var n=e.jid;e===t?n="window":void 0===e.jid&&(e.jid=n=++m._cache.jid),m._cache.events[n]||(m._cache.events[n]={})},m.getData=function(e){e=e instanceof m?e[0]:e;var n=e===t?"window":e.jid;return{jid:n,events:m._cache.events[n]}},m.isElement=function(t){return t&&t instanceof m||t instanceof HTMLElement||d(t)},m._cache={events:{},jid:0},i.pushStack=function(t){var e=m.merge(this.constructor(),t);return e},m.merge=function(t,e){for(var n=e.length,r=t.length,i=0;n>i;)t[r++]=e[i++];return t.length=r,t},m.contains=function(t,e){return t.contains(e)},m.extend=function(t){var e;return l.call(arguments,1).forEach(function(n){if(e=t,n)for(var r in n)e[r]=n[r]}),t},m.makeArray=function(t,e){var r=e||[];return null!==t&&(n(t)?m.merge(r,d(t)?[t]:t):r.push(t)),r},m.unique=function(t){if(null==t)return[];for(var e=[],n=0,r=t.length;r>n;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}return e},m.Event=function(t,e){var n,r;return t.type&&!e&&(e=t,t=t.type),n=t.split(".").splice(1).join("."),r=t.split(".")[0],t=f.createEvent("Event"),t.initEvent(r,!0,!0),m.extend(t,{namespace:n,isDefaultPrevented:function(){return t.defaultPrevented}},e)},m.event={add:function(t,e,n,r,i){m.setId(t);var a,o,s,u=function(e){m.event.dispatch.call(t,e)},h=m.getData(t).events;for(e=e.split(" "),o=e.length;o--;)s=e[o],a=s.split(".")[0],h[a]=h[a]||[],h[a].length?u=h[a][0].fn:t.addEventListener&&t.addEventListener(a,u,!1),h[a].push({namespace:s.split(".").splice(1).join("."),fn:u,selector:i,data:r,originfn:n})},remove:function(t,e,n){var r,i,a=function(t,e,r,i,a){var o;(n&&a.originfn===n||!n)&&(o=a.fn),t[e][r].fn===o&&(t[e].splice(r,1),t[e].length||i.removeEventListener(e,o))},o=m.getData(t).events;if(o)return!e&&o?c(o).forEach(function(e){for(i=o[e],r=i.length;r--;)a(o,e,r,t,i[r])}):void e.split(" ").forEach(function(e){var n,s=e.split(".")[0],u=e.split(".").splice(1).join(".");if(o[s])for(i=o[s],r=i.length;r--;)n=i[r],(!u||u&&n.namespace===u)&&a(o,s,r,t,n);else u&&c(o).forEach(function(e){for(i=o[e],r=i.length;r--;)n=i[r],n.namespace.split(".")[0]===u.split(".")[0]&&a(o,e,r,t,n)})})},trigger:function(t,e){var n=[];d(e)?n=e.split(" ").map(function(t){return m.Event(t)}):(e=e instanceof Event?e:m.Event(e),n=[e]),n.forEach(function(e){e.type&&t.dispatchEvent&&t.dispatchEvent(e)})},dispatch:function(t){for(var e,n,i,a,o,s=0,u=0,h=this,l=m.getData(h).events[t.type],c=l.length,f=[],d=[];c>s;s++)f.push(l[s]);for(s=0,c=f.length;c>s&&~l.indexOf(f[s])&&(!a||!a.isImmediatePropagationStopped());s++)if(n=null,o={},i=f[s],i.data&&(o.data=i.data),i.selector){if(~(d=m(h).find(i.selector)).indexOf(t.target)&&(n=t.target)||h!==t.target&&h.contains(t.target)){if(!n)for(e=d.length,u=0;e>u;u++)d[u]&&d[u].contains(t.target)&&(n=d[u]);if(!n)continue;o.currentTarget=n,a=new r(t,o),t.namespace&&t.namespace!==i.namespace||i.originfn.call(n,a)}}else a=new r(t,o),t.namespace&&t.namespace!==i.namespace||i.originfn.call(h,a)}},i.on=function(t,e,n,r){var i=this.length,a=0;if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),!r)return this;for(;i>a;a++)m.event.add(this[a],t,r,n,e);return this},i.one=function(t){var e,n=arguments,r=0,i=this.length,a=h.call(n,1,n.length-1),o=h.call(n,-1)[0];for(e=function(e){var n=m(e);t.split(" ").forEach(function(t){var r=function i(r){n.off(t,i),o.call(e,r)};n.on.apply(n,[t].concat(a,r))})};i>r;r++)e(this[r]);return this},i.trigger=function(t){var e=0,n=this.length;if(!t)return this;for(;n>e;e++)m.event.trigger(this[e],t);return this},i.off=function(t,e){for(var n=0,r=this.length;r>n;n++)m.event.remove(this[n],t,e);return this},i.find=function(t){for(var e=[],n=0,r=this.length,i=function(n){y(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(t),function(t){e.push(t)})};r>n;n++)i(this[n]);return m(e)},i.get=function(t){return null!=t?0>t?this[t+this.length]:this[t]:h.call(this)},i.eq=function(t){return m(this[t])},i.parent=function(){for(var t,e=[],n=0,r=this.length;r>n;n++)!~e.indexOf(t=this[n].parentElement)&&t&&e.push(t);return m(e)},i.toArray=function(){return h.call(this)},i.is=function(){var t=arguments;return this.some(function(e){return e.tagName.toLowerCase()===t[0]})},i.has=function(){var t=arguments;return this.some(function(e){return e.querySelectorAll(t[0]).length})},i.add=function(t,e){return this.pushStack(m.unique(m.merge(this.get(),m(t,e))))},i.attr=function(t,e){var n,r=arguments,i=0,a=this.length;if(d(t)&&1===r.length)return this[0]&&this[0].getAttribute(t);for(2===r.length?n=function(n){n.setAttribute(t,e)}:v(t)&&(n=function(e){c(t).forEach(function(n){e.setAttribute(n,t[n])})});a>i;i++)n(this[i]);return this},i.removeAttr=function(t){for(var e=0,n=this.length;n>e;e++)this[e].removeAttribute(t);return this},i.val=function(t){var e=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;n>e;e++)this[e].value=t;return this},i.css=function(e,n){var r,i=arguments,a=0,o=this.length;if(d(e)&&1===i.length)return this[0]&&t.getComputedStyle(this[0])[e];for(2===i.length?r=function(t){t.style[e]=n}:v(e)&&(r=function(t){c(e).forEach(function(n){t.style[n]=e[n]})});o>a;a++)r(this[a]);return this},i.data=function(t,e){var n,r=arguments,i={},a=0,o=this.length,s=function(t,e,n){v(n)?(t.jdata=t.jdata||{},t.jdata[e]=n):t.dataset[e]=n},u=function(t){return"true"===t?!0:"false"===t?!1:t};if(0===r.length)return this[0].jdata&&(i=this[0].jdata),c(this[0].dataset).forEach(function(t){i[t]=u(this[0].dataset[t])},this),i;if(1===r.length&&d(t))return this[0]&&u(this[0].dataset[t]||this[0].jdata&&this[0].jdata[t]);for(1===r.length&&v(t)?n=function(e){c(t).forEach(function(n){s(e,n,t[n])})}:2===r.length&&(n=function(n){s(n,t,e)});o>a;a++)n(this[a]);return this},i.removeData=function(t){for(var e,n,r=0,i=this.length;i>r;r++)if(e=this[r].jdata,n=this[r].dataset,t)e&&e[t]&&delete e[t],delete n[t];else{for(t in e)delete e[t];for(t in n)delete n[t]}return this},i.addClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];r>e;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.add(i[n]);return this},i.removeClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];r>e;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.remove(i[n]);return this},i.toggleClass=function(t,e){var n=0,r=this.length,i="toggle";if(e===!0&&(i="add")||e===!1&&(i="remove"),t)for(;r>n;n++)this[n].classList[i](t);return this},i.hasClass=function(t){var e=0,n=this.length;if(t)for(;n>e;e++)if(this[e].classList.contains(t))return!0;return!1},i.html=function(t){var e,n=arguments;return 1===n.length&&void 0!==t?this.empty().append(t):0===n.length&&(e=this[0])?e.innerHTML:this},i.append=function(t){var e,n=0,r=this.length;for(d(t)&&u.exec(t)?t=m(t):v(t)||(t=document.createTextNode(t)),t=t instanceof m?t:m(t),e=function(e,n){t.forEach(function(t){n?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})};r>n;n++)e(this[n],n);return this},i.appendTo=function(t){return m(t).append(this),this},i.empty=function(){for(var t,e=0,n=this.length;n>e;e++)for(t=this[e];t.lastChild;)t.removeChild(t.lastChild);return this},i.remove=function(){var t,e=0,n=this.length;for(this.off();n>e;e++)t=this[e],delete t.jdata,t.parentNode&&t.parentNode.removeChild(t);return this},"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e&&"object"===_typeof(e.exports)?e.exports=m:"function"==typeof define&&define.amd?(define(function(){return m}),t.jBone=t.$=m):"object"===("undefined"==typeof t?"undefined":_typeof(t))&&"object"===_typeof(t.document)&&(t.jBone=t.$=m)}(window)},{}],2:[function(t,e,n){!function(){function e(t){var e=new Set(t);return 1===e.size&&!e.has(o)}function n(t,e){var n=new Set(t);if(3===n.size||!n.has(o))return!1;var r=t.filter(function(t){return t===e});return 2===r.length}function r(t,e){return n(t,o)&&-1!==t.indexOf(e)}function i(){var t=new h;new l(t)}var a=t("jbone"),o="*",s=2500,u=function(){function t(){_classCallCheck(this,t),this.squares=Array(9).fill(o),this.lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],this.crossLines={0:[[0,1,2],[0,3,6],[0,4,8]],1:[[0,1,2],[1,4,7]],2:[[0,1,2],[2,5,8]],3:[[3,4,5],[0,3,6]],4:[[3,4,5],[1,4,5],[0,4,8]],5:[[3,4,5],[2,5,8]],6:[[6,7,8],[0,3,6],[2,4,6]],7:[[6,7,8],[1,4,7]],8:[[6,7,8],[2,5,8],[0,4,8]]},this.center=4,this.corners=new Map([[0,8],[2,6],[6,2],[8,0]]),this.middles=[1,7,3,5],this.getReady()}return _createClass(t,[{key:"getReady",value:function(){for(var t=0;9>t;t++)this["$square"+t]=a("#square"+t),this["$square"+t].html("").removeAttr("disabled").removeClass("fade winner1 winner2 winner3")}},{key:"makeMove",value:function(t,e){this.squares[t]=e;var n="X"===e?"Cross":"Circle",r='<img class="token-img" src="assets/images/'+e+'.svg" alt="'+n+'">';this["$square"+t].html(r).attr("disabled","")}}]),t}(),h=function(){function t(){_classCallCheck(this,t),this.board=new u,this.rival={O:"X",X:"O"},this.turn=0,this.cacheDom(),this.bindEvents()}return _createClass(t,[{key:"cacheDom",value:function(){this.$board=a("#board"),this.$square=a(".square"),this.$modal=a(".modal")}},{key:"bindEvents",value:function(){this.$square.on("click",this.handleMove.bind(this))}},{key:"enableBoard",value:function(){this.$board.removeClass("disabled")}},{key:"disableBoard",value:function(){this.$board.addClass("disabled")}},{key:"handleMove",value:function(t){var e=Number(t.currentTarget.dataset.square);this.board.makeMove.bind(this.board)(e,this.humanToken),this.continueGame(this.humanToken,this.cpuPlayer)}},{key:"continueGame",value:function(t,e){if(this.isGameOver()){var n=this.getWinner(),r=void 0;if(n){var i=n.token===this.humanToken;this.highlightLine(n.line),r=i?"YOU WIN!":"CPU WINS!"}else r="IT'S A TIE!";document.title=r,window.setTimeout(this.reset.bind(this),s)}else e.bind(this)(this.rival[t])}},{key:"reset",value:function(){this.board=new u,this.turn=0,this.$modal.removeClass("hidden"),document.title="Tic Tac Toe"}},{key:"getValidMoves",value:function(){var t=this.board.squares,e=function(e,n){return t[n]===o};return[].concat(_toConsumableArray(t.keys())).filter(e.bind(this))}},{key:"isGameOver",value:function(){return this.getWinner()||!this.getValidMoves().length}},{key:"toTokenArray",value:function(t){var e=this;return t.map(function(t){return e.board.squares[t]})}},{key:"isForkMove",value:function(t,e){var n=function(t){var n=this.toTokenArray(t);return r(n,e)},i=this.board.crossLines[t].filter(n.bind(this));return i.length>1}},{key:"getWinner",value:function(){var t=!0,n=!1,r=void 0;try{for(var i,a=this.board.lines[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this.toTokenArray(o);if(e(s))return{token:s[0],line:o}}}catch(u){n=!0,r=u}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw r}}return null}},{key:"highlightLine",value:function(t){for(var e=1,n=0;9>n;n++)-1===t.indexOf(n)?this.board["$square"+n].addClass("fade"):(this.board["$square"+n].addClass("winner"+e),e++)}},{key:"bestMove",value:function(t){var e=this,r=!0,i=!1,a=void 0;try{for(var s,u=this.board.lines[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var h=s.value,l=this.toTokenArray(h);if(n(l,t))return h[l.indexOf(o)]}}catch(c){i=!0,a=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw a}}var f=!0,d=!1,v=void 0;try{for(var y,p=this.board.lines[Symbol.iterator]();!(f=(y=p.next()).done);f=!0){var h=y.value,l=this.toTokenArray(h);if(n(l,this.humanToken))return h[l.indexOf(o)]}}catch(c){d=!0,v=c}finally{try{!f&&p["return"]&&p["return"]()}finally{if(d)throw v}}var m=this.getValidMoves(),g=!0,b=!1,k=void 0;try{for(var C,E=m[Symbol.iterator]();!(g=(C=E.next()).done);g=!0){var w=C.value;if(this.isForkMove(w,t))return w}}catch(c){b=!0,k=c}finally{try{!g&&E["return"]&&E["return"]()}finally{if(b)throw k}}var j=!0,T=!1,S=void 0;try{for(var x,q=m[Symbol.iterator]();!(j=(x=q.next()).done);j=!0){var w=x.value;if(this.isForkMove(w,this.humanToken))return w}}catch(c){T=!0,S=c}finally{try{!j&&q["return"]&&q["return"]()}finally{if(T)throw S}}if(-1!==m.indexOf(this.board.center))return this.board.center;var A=[].concat(_toConsumableArray(this.board.corners.entries())),$=A.filter(function(t,n){return e.board.squares[t]===e.humanToken&&e.board.squares[n]===o});if($.length){var O=this.board.corners.get($[0][0]);return O}var _=!0,M=!1,P=void 0;try{for(var L,D=this.board.corners.keys()[Symbol.iterator]();!(_=(L=D.next()).done);_=!0){var N=L.value;if(this.board.squares[N]===o)return N}}catch(c){M=!0,P=c}finally{try{!_&&D["return"]&&D["return"]()}finally{if(M)throw P}}var I=!0,B=!1,F=void 0;try{for(var W,G=this.board.middles[Symbol.iterator]();!(I=(W=G.next()).done);I=!0){var R=W.value;if(this.board.squares[R]===o)return R}}catch(c){B=!0,F=c}finally{try{!I&&G["return"]&&G["return"]()}finally{if(B)throw F}}}},{key:"cpuPlayer",value:function(t){console.time("cpu move"),this.disableBoard();var e=void 0;e=this.turn?this.bestMove(t):Math.floor(Math.random()*this.getValidMoves().length),this.board.makeMove.bind(this.board)(e,t),console.timeEnd("cpu move"),this.continueGame(t,this.humanPlayer)}},{key:"humanPlayer",value:function(t){this.turn++,this.enableBoard()}},{key:"start",value:function(){"human"===this.playerOne?this.humanPlayer(this.humanToken):this.cpuPlayer(this.rival[this.humanToken])}}]),t}(),l=function(){function t(e){_classCallCheck(this,t),this.game=e,this.cacheDom(),this.bindEvents()}return _createClass(t,[{key:"cacheDom",value:function(){this.$tokens=a(".token"),this.$players=a(".player"),this.$start=a("#start-btn"),this.$modal=a(".modal")}},{key:"bindEvents",value:function(){this.$tokens.on("click",this.handleTokenSelection.bind(this)),this.$players.on("click",this.handlePlayerSelection.bind(this)),this.$start.on("click",this.handleStart.bind(this))}},{key:"handleTokenSelection",value:function(t){var e=a(t.currentTarget);e.hasClass("unselected")&&(this.$tokens.toggleClass("unselected"),this.token=e.attr("data-token"))}},{key:"handlePlayerSelection",value:function(t){var e=a(t.currentTarget);e.hasClass("unselected")&&(this.$players.toggleClass("unselected"),this.playerOne=e.attr("data-playerone"))}},{key:"handleStart",value:function(t){this.game.playerOne=this.playerOne||"human",this.game.humanToken=this.token||"X",this.$modal.addClass("hidden"),this.game.start()}}]),t}();i()}()},{jbone:1}]},{},[2]);
//# sourceMappingURL=app.js.map
