{"version":3,"sources":["app.js"],"names":["debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","hasClass","el","className","classList","contains","indexOf","RegExp","test","addClass","add","removeClass","remove","replace","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","Array","isArray","Object","TypeError","smoothScroll","time","animate","e","elem","btns","target","id","to","offsetTop","from","window","scrollY","start","Date","getTime","timer","setInterval","step","Math","min","scrollTo","clearInterval","onMarkerClick","openPopup","toggleFoldedMenu","folded","menuMobileContainer","getAttribute","setAttribute","home","about","skills","projects","contact","forEach","addEventListener","toggleClassAllocationNodeList","nodeTarget","nodeList","prototype","call","fireActionOnScroll","scrollPos","pageY","sections","get","sectionLinks","chartBars","btn-home","document","getElementById","btn-about","btn-projects","btn-contact","paths","map","Vivus","type","duration","pathTimingFunction","LINEAR","animTimingFunction","L","center","doubleClickZoom","dragging","scrollWheelZoom","zoom","tileLayer","attribution","maxZoom","accessToken","addTo","Icon","Default","imagePath","marker","bindPopup","contactWays","contactForm","insertAdjacentHTML","_btns","querySelectorAll","mobilemenu","_sectionLinks","Map","section","set","fireOnScroll","scrollCarousel","preventDefault","degs","deltaY","carousel","style","transform","autoplay","carouselControl","textContent","removeEventListener","hammer","Hammer","Manager","Swipe","direction","DIRECTION_HORIZONTAL","threshold","on"],"mappings":"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","file":"app.js","sourcesContent":["function debounce(func, wait, immediate) {\n  // taken from Underscore.js\n\tvar timeout;\n\treturn function() {\n\t\tvar context = this, args = arguments;\n\t\tvar later = function() {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n        func.apply(context, args);\n      }\n\t\t};\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) {\n      func.apply(context, args);\n    }\n\t};\n}\n\nfunction hasClass(el, className) {\n  if (el.classList) {\n    return el.classList.contains(className);\n  } else {\n    return el.className.indexOf(className) !== new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n  }\n}\nfunction addClass(el, className) {\n  if (el.classList) {\n    if (!hasClass(el, className)) {\n      el.classList.add(className);\n    }\n  } else {\n    el.className += ' ' + className;\n  }\n}\n\nfunction removeClass(el, className) {\n  if (hasClass(el, className)) {\n    if (el.classList) {\n        el.classList.remove(className);\n    } else {\n      el.className.replace(new RegExp('(^| )' + className + '( |$)', 'g'), '');\n    }\n  }\n}\n\n\n(function(){\n  var btns = {'btn-home': document.getElementById('home'),\n            'btn-about': document.getElementById('about'),\n            'btn-projects': document.getElementById('projects'),\n            'btn-contact': document.getElementById('contact')\n            };\n  function smoothScroll(time) {\n    function animate(e) {\n      // smooth scrolling from @rahul_send89 function\n      // http://stackoverflow.com/a/26094310/1405004\n      var elem = btns[e.target.id];\n      var to = elem.offsetTop;\n      var from = window.scrollY;\n      var start = new Date().getTime(),\n          timer = setInterval(function() {\n            var step = Math.min(1,(new Date().getTime()-start)/time);\n                window.scrollTo(0,(from+step*(to-from))+1);\n                if( step === 1){\n                  clearInterval(timer);\n                }\n          },25);\n          window.scrollTo(0,(from+1));\n    }\n    return animate;\n  }\n\n  // «¡Hola!» svg drawing animation\n  var paths = document.getElementById('paths');\n  var greeting = new Vivus('greeting',  {\n    type: \"oneByOne\",\n    duration: 225,\n    pathTimingFunction: Vivus.LINEAR,\n\t\tanimTimingFunction: Vivus.LINEAR\n  }, function () {\n    paths.classList.add('drawn');\n  });\n\n  function onMarkerClick(e) {\n      e.target.openPopup();\n  }\n\n  {\n    // render the map of contact section\n    let map = L.map('map', {\n      center: [37.9410106, -1.1398814],\n      doubleClickZoom: 'center',\n      dragging: false,\n      scrollWheelZoom: false,\n      zoom: 11\n    });\n    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoianVhbnJpcWdvbiIsImEiOiJjaWs5MGR2bTAwMDA4d2xsdjNwOXQ3eXQ1In0.Y7PbFkq-Wxa2Kn5O1CWgUg', {\n      attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\n      maxZoom: 18,\n      id: 'juanriqgon.p2ln61p7',\n      accessToken: 'pk.eyJ1IjoianVhbnJpcWdvbiIsImEiOiJjaWs5MGR2bTAwMDA4d2xsdjNwOXQ3eXQ1In0.Y7PbFkq-Wxa2Kn5O1CWgUg'\n    }).addTo(map);\n    L.Icon.Default.imagePath = '../assets/images';\n    let marker = L.marker([37.9410106, -1.1398814]).addTo(map);\n    marker.bindPopup(\"I live around here.\");\n    marker.addEventListener('click', onMarkerClick);\n  }\n\n  // render the contact form\n  var contactWays = document.getElementById('contact-ways');\n  var contactForm = '<form class=\"contact-form\" action=\"http://pooleapp.com/stash/52a1c0eb-dcc6-45b9-8923-73309fbb729b/\" method=\"post\">\\n\\t<input type=\"hidden\" name=\"redirect_to\" value=\"{YOUR-THANKS-PAGE}\" />\\n\\t<p>\\n\\t\\t<label for=\"name\">Name\\n\\t\\t\\t<input class=\"contact-field\" type=\"text\" name=\"name\" id=\"name\" placeholder=\"What\\'s your name?\" />\\n\\t\\t</label>\\n\\t</p>\\n\\t<p>\\n\\t\\t<label for=\"e-mail\">E-mail\\n\\t\\t\\t<input class=\"contact-field\" type=\"email\" name=\"email\" id=\"email\" placeholder=\"An email to answer you\">\\n\\t\\t</label>\\n\\t</p>\\n\\t<p>\\n\\t\\t<label for=\"message\">Message\\n\\t\\t\\t<textarea class=\"message\" id=\"message\" name=\"message\" rows=\"5\" placeholder=\"Your message\"></textarea>\\n\\t\\t</label>\\n\\t</p>\\n\\t<p>\\n\\t\\t<input class=\"submit\" type=\"submit\" value=\"Submit\" />\\n\\t</p>\\n</form>';\n  contactWays.insertAdjacentHTML('beforeend', contactForm);\n\n  // smooth scrolling\n  {\n    let btns = document.querySelectorAll('.nav-link');\n    for (let i = 0; i < btns.length; i++) {\n      btns[i].addEventListener('click', smoothScroll(200));\n    }\n  }\n\n  // menu mobile\n  var mobilemenu = document.getElementById('mobile-menu');\n  var menuMobileContainer = document.getElementById('navbar-mobile-menu-container');\n  // sectionsLinks used in toggleFoldedMenu and fireActionOnScroll\n  var sectionLinks = document.querySelectorAll('.nav-link');\n  var [home, about, skills, projects, contact] = sectionLinks;\n  function toggleFoldedMenu() {\n    var folded = menuMobileContainer.getAttribute('data-folded');\n    if (folded === 'true') {\n      menuMobileContainer.setAttribute('data-folded', 'false');\n      [home, about, skills, projects, contact].forEach(el => el.addEventListener('click', toggleFoldedMenu));\n      return;\n    }\n    menuMobileContainer.setAttribute('data-folded', 'true');\n  }\n\n  mobilemenu.addEventListener('click', toggleFoldedMenu);\n\n  // Fire animations and update navbar when scroll to the proper section\n  var sections = new Map();\n  [\"home\", \"about\", \"skills\", \"projects\", \"contact\"].forEach(section => sections.set(section, document.getElementById(section).offsetTop));\n  var chartBars = document.querySelectorAll('.chart-bar');\n\n  function toggleClassAllocationNodeList(nodeTarget, nodeList, className) {\n    // remove «className» from other nodes of nodeList and add it to nodeTarget\n    if (!hasClass(nodeTarget, className)) {\n        Array.prototype.forEach.call(nodeList, el=>removeClass(el, className));\n      }\n      addClass(nodeTarget, className);\n  }\n\n  function fireActionOnScroll(e) {\n    var scrollPos = e.pageY + 100;\n    if (scrollPos < sections.get('about')) {\n      // do something in home\n      toggleClassAllocationNodeList(home, sectionLinks, 'current-section');\n    } else if (scrollPos < sections.get('skills')) {\n      // do something in about\n      toggleClassAllocationNodeList(about, sectionLinks, 'current-section');\n    } else if (scrollPos < sections.get('projects')) {\n      // do something in skills\n      toggleClassAllocationNodeList(skills, sectionLinks, 'current-section');\n      Array.prototype.forEach.call(chartBars, el => addClass(el, 'animate-bar'));\n    } else if (scrollPos < sections.get('contact')) {\n      // do something in projects\n      toggleClassAllocationNodeList(projects, sectionLinks, 'current-section');\n    } else {\n      // do something in contact\n      toggleClassAllocationNodeList(contact, sectionLinks, 'current-section');\n    }\n  }\n\n  var fireOnScroll = debounce(fireActionOnScroll, 100);\n\n  window.addEventListener('scroll', fireOnScroll);\n\n  // carousel\n  {\n    let autoplay = true;\n    let carouselControl = document.getElementById('carousel-control');\n    let carousel = document.getElementById('carousel');\n    let degs = 0;\n    function scrollCarousel(e) {\n      e.preventDefault();\n      degs = ((e.deltaY < 0)? degs + 10: degs - 10);\n      carousel.style.transform = \"rotateY(-\" + degs +\"deg)\";\n    }\n    // carousel control toggle\n    carouselControl.addEventListener('click', function() {\n      autoplay = (autoplay)? false: true;\n\n      if(autoplay) {\n        carouselControl.textContent = 'Autoplay';\n        addClass(carousel, 'carousel-animation');\n        carousel.removeEventListener('wheel', scrollCarousel);\n      } else {\n        carouselControl.textContent = 'Swipe';\n        removeClass(carousel, 'carousel-animation');\n        carousel.addEventListener('wheel', scrollCarousel);\n      }\n    });\n\n    // carousel manual pan\n    let hammer = new Hammer.Manager(carousel);\n\n    hammer.add( new Hammer.Swipe({direction: Hammer.DIRECTION_HORIZONTAL, threshold: 10}));\n    hammer.on('swiperight', function(e) {\n        degs -= 60;\n        carousel.style.transform = \"rotateY(-\" + degs +\"deg)\";\n    });\n    hammer.on('swipeleft', function(e) {\n      degs += 60;\n      carousel.style.transform = \"rotateY(-\" + degs +\"deg)\";\n    });\n  }\n})();"],"sourceRoot":"/source/"}