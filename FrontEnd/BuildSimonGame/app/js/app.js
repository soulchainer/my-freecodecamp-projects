!function t(e,r,n){function o(l,s){if(!r[l]){if(!e[l]){var u="function"==typeof require&&require;if(!s&&u)return u(l,!0);if(a)return a(l,!0);var i=new Error("Cannot find module '"+l+"'");throw i.code="MODULE_NOT_FOUND",i}var c=r[l]={exports:{}};e[l][0].call(c.exports,function(t){var r=e[l][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[l].exports}for(var a="function"==typeof require&&require,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(t,e,r){"use strict";!function(){function t(t){function e(){t.classList.add("pushed")}return e}function e(t){function e(){t.classList.remove("pushed")}return e}function r(t){t.classList.remove("pushed")}function n(r){var n=r.id;d[n]=c.createInstance(n);var a=d[n];a.on("succeeded",t(o[n])),a.on("complete",e(o[n]))}for(var o=[],a=[0,1,2,3],l=0;l<a.length;l++){var s=a[l];o[s]=document.getElementById("tap"+s)}var u="/assets/audio/",i=[{id:"0",src:"tap0.ogg"},{id:"1",src:"tap1.ogg"},{id:"2",src:"tap2.ogg"},{id:"3",src:"tap3.ogg"}],c=createjs.Sound;c.alternateExtensions=["mp3"],c.on("fileload",n),c.registerSounds(i,u);var d=[],p=function(){function t(){return String(Math.floor(4*Math.random()))}function e(t){switch(console.log("pulsado "+t.target.id),t.target.id){case"start":T.started?v():T.start();break;default:T.strict=T.strict?!1:!0}}function n(t){t.hasAttribute("disabled")&&t.removeAttribute("disabled")}function a(t){t.hasAttribute("disabled")||t.setAttribute("disabled","true")}function l(t){if(console.log("pulsado "+t.target.id),T.on=T.on?!1:!0,T.on){console.log("Power on");for(var r=[y,m],n=0;n<r.length;n++){var o=r[n];o.addEventListener("click",e)}}else console.log("Power off"),f()}function s(){console.log("You didn't tap any button or tap the wrong one"),console.log(T.strict),T.strict?v():(T.playerMiss=!0,T.turn--,window.setTimeout(T.cpuTurn,200))}function u(t){console.log("Se ejecuta processMusicTap"),console.log(t),console.log(o),console.log("playerTap: "+T.currentPlayerTap);var e=t.target.getAttribute("data-btn"),r=d[e];r.play(),r.on("complete",function(){if(console.log("Al completar sonido → tapped: "+e+" taps["+T.currentPlayerTap+"]: "+T.taps[T.currentPlayerTap]+" turn: "+T.turn),e===T.taps[T.currentPlayerTap]){if(console.log("Correct button pressed"),T.currentPlayerTap++,console.log("playerTap: "+T.currentPlayerTap,"turn: "+T.turn),T.currentPlayerTap===T.turn){console.log("Lista de taps mostrada al completar sonido y alcanzar el final del turno del jugador:"),console.log(T.taps);var t=!0,r=!1,n=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var i=a.value;i.removeEventListener("click",u)}}catch(c){r=!0,n=c}finally{try{!t&&l["return"]&&l["return"]()}finally{if(r)throw n}}window.setTimeout(T.cpuTurn,200)}}else{console.log("Al completar el sonido y pulsarse botón erroneamente, tapped !== self.taps[playerTap] →  tapped: "+e+" taps["+T.currentPlayerTap+"]: "+T.taps[T.currentPlayerTap]+" turn: "+T.turn);var d=!0,p=!1,f=void 0;try{for(var v,g=o[Symbol.iterator]();!(d=(v=g.next()).done);d=!0){var i=v.value;i.removeEventListener("click",u)}}catch(c){p=!0,f=c}finally{try{!d&&g["return"]&&g["return"]()}finally{if(p)throw f}}s()}},null,!0)}function i(){var t=arguments.length<=0||void 0===arguments[0]?"--":arguments[0];h.textContent=t}function p(){window.clearInterval(T.cpuInterval),T.cpuInterval=null,c.stop(),o.forEach(r);var t=!0,e=!1,n=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;s.removeEventListener("click",u)}}catch(d){e=!0,n=d}finally{try{!t&&l["return"]&&l["return"]()}finally{if(e)throw n}}i(),T.turn=0,T.taps=[],T.currentPlayerTap=null,T.playerMiss=!1}function f(){p();for(var t=[y,m],r=0;r<t.length;r++){var n=t[r];n.removeEventListener("click",e)}T.on=!1,T.started=!1}function v(){p(),T.on=!0,T.start()}var g=document.getElementById("power"),y=document.getElementById("start"),m=document.getElementById("strict"),h=document.getElementById("led"),T=this;this.cpuInterval=null,g.addEventListener("click",l),this.on=!1,this.mode="Normal",this.strict=!1,this.started=!1,this.turn=0,this.turns="Normal"===T.mode?20:1/0,this.start=function(){T.started=!0,T.cpuTurn()},this.taps=[],this.currentPlayerTap=null,this.playerMiss=!1,this.cpuTurn=function(){function e(){console.log(T.turn+" "+r),console.log(T.taps),console.log(r),d[T.taps[r]].play(),r++,console.log("turn "+T.turn+" tap "+r),r>=T.turn&&(window.clearInterval(T.cpuInterval),T.cpuInterval=null,window.setTimeout(T.playerTurn,400))}if(T.turn++,T.gameEnded())return void console.log("Game ended");console.log("entra cpu turn"),T.playerMiss&&T.taps.length||(T.taps.push(t()),i(T.turn)),T.playerMiss=!1,console.log(T.taps);var r=0;o.forEach(a),T.cpuInterval=window.setInterval(e,600,T.cpuInterval)},this.playerTurn=function(){console.log("Entra player"),o.forEach(n);T.turn;T.currentPlayerTap=0;var t=!0,e=!1,r=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;s.addEventListener("click",u)}}catch(i){e=!0,r=i}finally{try{!t&&l["return"]&&l["return"]()}finally{if(e)throw r}}},this.gameEnded=function(){return T.turn>T.turns}};new p}()},{}]},{},[1]);
//# sourceMappingURL=app.js.map
