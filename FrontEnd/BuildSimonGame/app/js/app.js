!function t(e,r,n){function o(l,s){if(!r[l]){if(!e[l]){var i="function"==typeof require&&require;if(!s&&i)return i(l,!0);if(a)return a(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[l]={exports:{}};e[l][0].call(c.exports,function(t){var r=e[l][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[l].exports}for(var a="function"==typeof require&&require,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(t,e,r){"use strict";!function(){var t=function(){function t(t){function e(){t.classList.add("pushed")}return e}function e(t){function e(){t.classList.remove("pushed")}return e}function r(t){t.classList.remove("pushed")}function n(r){var n=r.id;b[n]=w.createInstance(n);var o=b[n];o.on("succeeded",t(y[n])),o.on("complete",e(y[n]))}function o(){return 0===O.mode?20:1/0}function a(){return String(Math.floor(4*Math.random()))}function l(t){switch(console.log("pulsado "+t.target.id),t.target.id){case"start":O.started?m():O.start();break;case"strict":O.strict?(O.strict=!1,C.classList.remove("pushed"),M.textContent=""):(O.strict=!0,C.classList.add("pushed"),M.textContent="(Strict)");break;default:O.mode=O.mode===A.length-1?0:O.mode+1,S.textContent=A[O.mode],O.turns=o()}}function s(t){t.hasAttribute("disabled")&&t.removeAttribute("disabled")}function i(t){t.hasAttribute("disabled")||t.setAttribute("disabled","true")}function u(t){if(O.on=O.on?!1:!0,O.on){B.textContent="On",x.classList.add("right");for(var e=[L,C,P],r=0;r<e.length;r++){var n=e[r];n.addEventListener("click",l)}}else B.textContent="Off",x.classList.remove("right"),v()}function c(){B.textContent="YOU MISS!!",console.log(O.strict),O.strict?m():(O.playerMiss=!0,O.turn--,window.setTimeout(O.cpuTurn,200))}function d(t){console.log("Se ejecuta processMusicTap"),console.log(t),console.log(y),console.log("playerTap: "+O.currentPlayerTap);var e=t.target.getAttribute("data-btn"),r=b[e];r.play(),r.on("complete",function(){if(console.log("Al completar sonido → tapped: "+e+" taps["+O.currentPlayerTap+"]: "+O.taps[O.currentPlayerTap]+" turn: "+O.turn),e===O.taps[O.currentPlayerTap]){if(console.log("Correct button pressed"),O.currentPlayerTap++,console.log("playerTap: "+O.currentPlayerTap,"turn: "+O.turn),O.currentPlayerTap===O.turn){console.log("Lista de taps mostrada al completar sonido y alcanzar el final del turno del jugador:"),console.log(O.taps);var t=!0,r=!1,n=void 0;try{for(var o,a=y[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.removeEventListener("click",d)}}catch(s){r=!0,n=s}finally{try{!t&&a["return"]&&a["return"]()}finally{if(r)throw n}}window.setTimeout(O.cpuTurn,200)}}else{console.log("Al completar el sonido y pulsarse botón erroneamente, tapped !== self.taps[playerTap] →  tapped: "+e+" taps["+O.currentPlayerTap+"]: "+O.taps[O.currentPlayerTap]+" turn: "+O.turn);var i=!0,u=!1,p=void 0;try{for(var f,v=y[Symbol.iterator]();!(i=(f=v.next()).done);i=!0){var l=f.value;l.removeEventListener("click",d)}}catch(s){u=!0,p=s}finally{try{!i&&v["return"]&&v["return"]()}finally{if(u)throw p}}c()}},null,!0)}function p(){var t=arguments.length<=0||void 0===arguments[0]?"--":arguments[0];k.textContent=t}function f(){window.clearInterval(O.cpuInterval),O.cpuInterval=null,w.stop(),y.forEach(r);var t=!0,e=!1,n=void 0;try{for(var o,a=y[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.removeEventListener("click",d)}}catch(s){e=!0,n=s}finally{try{!t&&a["return"]&&a["return"]()}finally{if(e)throw n}}p(),O.turn=0,O.taps=[],O.currentPlayerTap=null,O.playerMiss=!1}function v(){f();for(var t=[L,C],e=0;e<t.length;e++){var r=t[e];r.removeEventListener("click",l)}O.on=!1,O.started=!1,P.addEventListener("click",l)}function m(){f(),O.on=!0,O.start()}for(var y=[],g=[0,1,2,3],h=0;h<g.length;h++){var E=g[h];y[E]=document.getElementById("tap"+E)}var T="/assets/audio/",I=[{id:"0",src:"tap0.ogg"},{id:"1",src:"tap1.ogg"},{id:"2",src:"tap2.ogg"},{id:"3",src:"tap3.ogg"}],w=createjs.Sound;w.alternateExtensions=["mp3"],w.on("fileload",n),w.registerSounds(I,T);var b=[],x=document.getElementById("power"),L=document.getElementById("start"),C=document.getElementById("strict"),P=document.getElementById("modes"),k=document.getElementById("led"),S=document.getElementById("mode-label"),M=document.getElementById("strict-label"),B=document.getElementById("status"),A=["Normal","No limit"];x.addEventListener("click",u);var O=this;this.cpuInterval=null,this.on=!1,this.mode=0,this.strict=!1,this.started=!1,this.turn=0,this.turns=o(),this.start=function(){P.removeEventListener("click",l),O.started=!0,O.cpuTurn()},this.taps=[],this.currentPlayerTap=null,this.playerMiss=!1,this.cpuTurn=function(){function t(){console.log(O.turn+" "+e),console.log(O.taps),console.log(e),b[O.taps[e]].play(),e++,console.log("turn "+O.turn+" tap "+e),e>=O.turn&&(window.clearInterval(O.cpuInterval),O.cpuInterval=null,window.setTimeout(O.playerTurn,400))}if(O.turn++,O.gameEnded())return void(B.textContent="YOU WIN!!");B.textContent="CPU turn",O.playerMiss&&O.taps.length||(O.taps.push(a()),p(O.turn)),O.playerMiss=!1,console.log(O.taps);var e=0;y.forEach(i),O.cpuInterval=window.setInterval(t,600,O.cpuInterval)},this.playerTurn=function(){B.textContent="Your turn",y.forEach(s);O.turn;O.currentPlayerTap=0;var t=!0,e=!1,r=void 0;try{for(var n,o=y[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=n.value;a.addEventListener("click",d)}}catch(l){e=!0,r=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw r}}},this.gameEnded=function(){return O.turn>O.turns}};new t}()},{}]},{},[1]);
//# sourceMappingURL=app.js.map
