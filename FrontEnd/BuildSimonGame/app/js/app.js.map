{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app.js","src/js/app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","playingMusicButton","playing","classList","add","unpressButton","unpressed","remove","onSoundLoaded","id","snds","cs","createInstance","snd","on","musicBtns","_arr","_i","document","getElementById","assetPath","sounds","src","createjs","Sound","alternateExtensions","registerSounds","simon","getTurns","self","mode","Infinity","getRandomTap","String","Math","floor","random","processFunctionButton","console","log","target","started","resetGame","start","strict","strictBtn","strictLabel","textContent","modes","modeLabel","turns","enableMusicBtns","hasAttribute","removeAttribute","disableMusicBtns","setAttribute","togglePower","status","powerBtn","_arr2","startBtn","modesBtn","_i2","btn","addEventListener","stopGame","musicTapError","playerMiss","turn","window","setTimeout","cpuTurn","processMusicTap","currentPlayerTap","tapped","getAttribute","play","taps","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","undefined","_step2","_iterator2","Symbol","iterator","next","done","value","removeEventListener","err","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","updateLed","arguments","led","baseReset","clearInterval","cpuInterval","stop","forEach","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_arr3","_i3","this","tap","playerTurn","gameEnded","push","setInterval","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n(function () {\n  function playingMusicButton(e) {\n    // what to do when music of button starts\n    function playing() {\n      e.classList.add('pushed');\n    }\n    return playing;\n  }\n  function unpressButton(e) {\n    // what to do when music of button ends\n    function unpressed() {\n      e.classList.remove('pushed');\n    }\n    return unpressed;\n  }\n  function unpressed(e) {\n    e.classList.remove('pushed');\n  }\n\n  // get the music buttons\n  var musicBtns = [];\n  var _arr = [0, 1, 2, 3];\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var i = _arr[_i];\n    musicBtns[i] = document.getElementById(\"tap\" + i);\n  }\n\n  // create and load the sounds\n  var assetPath = \"/assets/audio/\";\n  var sounds = [{ id: \"0\", src: \"tap0.ogg\" }, { id: \"1\", src: \"tap1.ogg\" }, { id: \"2\", src: \"tap2.ogg\" }, { id: \"3\", src: \"tap3.ogg\" }];\n  var cs = createjs.Sound;\n  cs.alternateExtensions = [\"mp3\"];\n  cs.on(\"fileload\", onSoundLoaded);\n  cs.registerSounds(sounds, assetPath);\n  var snds = [];\n  function onSoundLoaded(e) {\n    // run when all sounds are ready\n    var id = e.id;\n    snds[id] = cs.createInstance(id);\n    var snd = snds[id];\n    snd.on(\"succeeded\", playingMusicButton(musicBtns[id]));\n    snd.on(\"complete\", unpressButton(musicBtns[id]));\n  }\n\n  // simon device function\n  var simon = function simon() {\n    var powerBtn = document.getElementById('power');\n    var startBtn = document.getElementById('start');\n    var strictBtn = document.getElementById('strict');\n    var modesBtn = document.getElementById('modes');\n    var led = document.getElementById('led');\n    var modeLabel = document.getElementById('mode-label');\n    var strictLabel = document.getElementById('strict-label');\n    var status = document.getElementById('status');\n    var modes = [\"Normal\", \"Survival\"]; // game modes available\n    var self = this;\n    this.cpuInterval = null;\n    powerBtn.addEventListener('click', togglePower);\n    this.on = false; // Is the Simon device turned on?\n    this.mode = 0;\n    this.strict = false; // Additive mode: after a fail, the game resets\n    this.started = false; // Is the Simon game started?\n    this.turn = 0;\n    this.turns = getTurns();\n    this.start = function () {\n      modesBtn.removeEventListener('click', processFunctionButton);\n      self.started = true;\n      self.cpuTurn();\n    };\n    this.taps = [];\n    this.currentPlayerTap = null;\n    this.playerMiss = false;\n    this.cpuTurn = function () {\n      self.turn++;\n      if (!self.gameEnded()) {\n        status.textContent = \"CPU turn\";\n        if (!self.playerMiss || !self.taps.length) {\n          self.taps.push(getRandomTap());\n          updateLed(self.turn);\n        }\n        self.playerMiss = false;\n        console.log(self.taps);\n        var tap = 0;\n        musicBtns.forEach(disableMusicBtns);\n        self.cpuInterval = window.setInterval(play, 600, self.cpuInterval);\n      } else {\n        status.textContent = \"YOU WIN!!\";\n        return;\n      }\n      function play() {\n        console.log(self.turn + \" \" + tap);\n        console.log(self.taps);\n        console.log(tap);\n        snds[self.taps[tap]].play();\n        tap++;\n        console.log(\"turn \" + self.turn + \" tap \" + tap);\n        if (tap >= self.turn) {\n          window.clearInterval(self.cpuInterval);\n          self.cpuInterval = null;\n          window.setTimeout(self.playerTurn, 400);\n        }\n      }\n    };\n    this.playerTurn = function () {\n      status.textContent = \"Your turn\";\n      musicBtns.forEach(enableMusicBtns);\n      var taps = self.turn;\n      self.currentPlayerTap = 0;\n      // declare actions to trigger when a music button is pressed\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = musicBtns[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var btn = _step.value;\n\n          btn.addEventListener('click', processMusicTap);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    };\n    this.gameEnded = function () {\n      return self.turn > self.turns;\n    };\n\n    // helper functions\n    function getTurns() {\n      return self.mode === 0 ? 20 : Infinity;\n    }\n    function getRandomTap() {\n      return String(Math.floor(Math.random() * 4));\n    }\n    function processFunctionButton(e) {\n      console.log(\"pulsado \" + e.target.id);\n      switch (e.target.id) {\n        case 'start':\n          if (self.started) {\n            resetGame();\n          } else {\n            self.start();\n          }\n          break;\n        case 'strict':\n          if (self.strict) {\n            self.strict = false;\n            strictBtn.classList.remove('pushed');\n            strictLabel.textContent = \"\";\n          } else {\n            self.strict = true;\n            strictBtn.classList.add('pushed');\n            strictLabel.textContent = \"(Strict)\";\n          }\n          break;\n        default:\n          self.mode = self.mode === modes.length - 1 ? 0 : self.mode + 1;\n          modeLabel.textContent = modes[self.mode];\n          self.turns = getTurns();\n      }\n    }\n    function enableMusicBtns(e) {\n      if (e.hasAttribute('disabled')) {\n        e.removeAttribute('disabled');\n      }\n    }\n    function disableMusicBtns(e) {\n      if (!e.hasAttribute('disabled')) {\n        e.setAttribute('disabled', 'true');\n      }\n    }\n    function togglePower(e) {\n      self.on = self.on ? false : true;\n      if (self.on) {\n        status.textContent = \"On\";\n        powerBtn.classList.add('right');\n        var _arr2 = [startBtn, strictBtn, modesBtn];\n        for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n          var btn = _arr2[_i2];\n          btn.addEventListener('click', processFunctionButton);\n        }\n      } else {\n        status.textContent = \"Off\";\n        powerBtn.classList.remove('right');\n        stopGame();\n      }\n    }\n    function musicTapError() {\n      status.textContent = \"YOU MISS!!\";\n      console.log(self.strict);\n      if (self.strict) {\n        resetGame();\n      } else {\n        self.playerMiss = true;\n        self.turn--;\n        window.setTimeout(self.cpuTurn, 200);\n      }\n    }\n    function processMusicTap(e) {\n      console.log(\"Se ejecuta processMusicTap\");\n      console.log(e);\n      console.log(musicBtns);\n      console.log(\"playerTap: \" + self.currentPlayerTap);\n      var tapped = e.target.getAttribute(\"data-btn\");\n      var snd = snds[tapped];\n      snd.play();\n      snd.on('complete', function () {\n        console.log(\"Al completar sonido → tapped: \" + tapped + \" taps[\" + self.currentPlayerTap + \"]: \" + self.taps[self.currentPlayerTap] + \" turn: \" + self.turn);\n        if (tapped === self.taps[self.currentPlayerTap]) {\n          console.log(\"Correct button pressed\");\n          self.currentPlayerTap++;\n          console.log(\"playerTap: \" + self.currentPlayerTap, \"turn: \" + self.turn);\n          if (self.currentPlayerTap === self.turn) {\n            console.log(\"Lista de taps mostrada al completar sonido y alcanzar el final del turno del jugador:\");\n            console.log(self.taps);\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = musicBtns[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var btn = _step2.value;\n\n                btn.removeEventListener('click', processMusicTap);\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                  _iterator2.return();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n\n            window.setTimeout(self.cpuTurn, 200);\n          }\n        } else {\n          console.log(\"Al completar el sonido y pulsarse botón erroneamente, tapped !== self.taps[playerTap] →  tapped: \" + tapped + \" taps[\" + self.currentPlayerTap + \"]: \" + self.taps[self.currentPlayerTap] + \" turn: \" + self.turn);\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = musicBtns[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var btn = _step3.value;\n\n              btn.removeEventListener('click', processMusicTap);\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n\n          musicTapError();\n        }\n      }, null, true);\n    }\n    function updateLed() {\n      var value = arguments.length <= 0 || arguments[0] === undefined ? \"--\" : arguments[0];\n\n      led.textContent = value;\n    }\n    function baseReset() {\n      window.clearInterval(self.cpuInterval);\n      self.cpuInterval = null;\n      cs.stop();\n      musicBtns.forEach(unpressed);\n      // borrar los escuchadores de eventos click\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = musicBtns[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var btn = _step4.value;\n\n          btn.removeEventListener('click', processMusicTap);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      updateLed();\n      self.turn = 0;\n      self.taps = [];\n      self.currentPlayerTap = null;\n      self.playerMiss = false;\n    }\n    function stopGame() {\n      baseReset();\n      var _arr3 = [startBtn, strictBtn];\n      for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n        var btn = _arr3[_i3];\n        btn.removeEventListener('click', processFunctionButton);\n      }\n      self.on = false;\n      self.started = false;\n      modesBtn.addEventListener('click', processFunctionButton);\n    }\n    function resetGame() {\n      baseReset();\n      self.on = true;\n      self.start();\n    }\n  };\n\n  // launch the game\n  var simonGame = new simon();\n})();\n\n},{}]},{},[1])\n\n","(function(){\n  function playingMusicButton(e) {  // what to do when music of button starts\n    function playing() {\n      e.classList.add('pushed');\n    }\n    return playing;\n  }\n  function unpressButton(e) {  // what to do when music of button ends\n    function unpressed() {\n      e.classList.remove('pushed');\n    }\n    return unpressed;\n  }\n  function unpressed(e) {\n    e.classList.remove('pushed');\n  }\n\n  // get the music buttons\n  var musicBtns = [];\n  for (let i of [0,1,2,3]) {\n    musicBtns[i] = document.getElementById(\"tap\"+i);\n  }\n\n  // create and load the sounds\n  var assetPath = \"/assets/audio/\";\n  var sounds = [\n    {id: \"0\", src: \"tap0.ogg\"},\n    {id: \"1\", src: \"tap1.ogg\"},\n    {id: \"2\", src: \"tap2.ogg\"},\n    {id: \"3\", src: \"tap3.ogg\"}\n  ];\n  var cs = createjs.Sound;\n  cs.alternateExtensions = [\"mp3\"];\n  cs.on(\"fileload\", onSoundLoaded);\n  cs.registerSounds(sounds, assetPath);\n  var snds = [];\n  function onSoundLoaded(e) {\n    // run when all sounds are ready\n    var id = e.id;\n    snds[id] = cs.createInstance(id);\n    var snd = snds[id];\n    snd.on(\"succeeded\", playingMusicButton(musicBtns[id]));\n    snd.on(\"complete\", unpressButton(musicBtns[id]));\n  }\n\n  // simon device function\n  var simon = function() {\n    var powerBtn = document.getElementById('power');\n    var startBtn = document.getElementById('start');\n    var strictBtn = document.getElementById('strict');\n    var modesBtn = document.getElementById('modes');\n    var  led = document.getElementById('led');\n    var modeLabel = document.getElementById('mode-label');\n    var strictLabel = document.getElementById('strict-label');\n    var status = document.getElementById('status');\n    var modes = [\"Normal\", \"Survival\"]; // game modes available\n    var self = this;\n    this.cpuInterval = null;\n    powerBtn.addEventListener('click', togglePower);\n    this.on = false; // Is the Simon device turned on?\n    this.mode = 0;\n    this.strict = false;  // Additive mode: after a fail, the game resets\n    this.started = false; // Is the Simon game started?\n    this.turn = 0;\n    this.turns = getTurns();\n    this.start = function() {\n      modesBtn.removeEventListener('click', processFunctionButton);\n      self.started = true;\n      self.cpuTurn();\n    };\n    this.taps = [];\n    this.currentPlayerTap = null;\n    this.playerMiss = false;\n    this.cpuTurn = function() {\n      self.turn++;\n      if (!self.gameEnded()) {\n        status.textContent = \"CPU turn\";\n        if (!self.playerMiss || !self.taps.length) {\n          self.taps.push(getRandomTap());\n          updateLed(self.turn);\n        }\n        self.playerMiss = false;\n        console.log(self.taps);\n        var tap = 0;\n        musicBtns.forEach(disableMusicBtns);\n        self.cpuInterval = window.setInterval(play, 600, self.cpuInterval);\n      } else {\n        status.textContent = \"YOU WIN!!\";\n        return;\n      }\n      function play() {\n        console.log(self.turn + \" \"+ tap);\n        console.log(self.taps);\n        console.log(tap);\n        snds[self.taps[tap]].play();\n        tap++;\n        console.log(\"turn \" + self.turn + \" tap \"+ tap);\n        if ((tap >= self.turn)) {\n          window.clearInterval(self.cpuInterval);\n          self.cpuInterval = null;\n          window.setTimeout(self.playerTurn, 400);\n        }\n      }\n    };\n    this.playerTurn = function() {\n      status.textContent = \"Your turn\";\n      musicBtns.forEach(enableMusicBtns);\n      var taps = self.turn;\n      self.currentPlayerTap = 0;\n      // declare actions to trigger when a music button is pressed\n      for (let btn of musicBtns) {\n        btn.addEventListener('click', processMusicTap);\n      }\n    };\n    this.gameEnded = function() {\n      return (self.turn > self.turns);\n    };\n\n    // helper functions\n    function getTurns() {\n      return (self.mode === 0)? 20: Infinity;\n    }\n    function getRandomTap() {\n        return String(Math.floor(Math.random()*4));\n    }\n    function processFunctionButton(e) {\n      console.log(\"pulsado \"+ e.target.id);\n      switch (e.target.id) {\n        case 'start':\n          if (self.started) {\n            resetGame();\n          } else {\n            self.start();\n          }\n          break;\n        case 'strict':\n          if (self.strict) {\n            self.strict = false;\n            strictBtn.classList.remove('pushed');\n            strictLabel.textContent= \"\";\n          } else {\n            self.strict = true;\n            strictBtn.classList.add('pushed');\n            strictLabel.textContent= \"(Strict)\";\n          }\n          break;\n        default:\n          self.mode = (self.mode === modes.length - 1)? 0: self.mode + 1;\n          modeLabel.textContent = modes[self.mode];\n          self.turns = getTurns();\n      }\n    }\n    function enableMusicBtns(e) {\n      if (e.hasAttribute('disabled')) {\n        e.removeAttribute('disabled');\n      }\n    }\n    function disableMusicBtns(e) {\n      if (!e.hasAttribute('disabled')) {\n        e.setAttribute('disabled','true');\n      }\n    }\n    function togglePower(e){\n      self.on = (self.on)? false: true;\n      if (self.on) {\n        status.textContent = \"On\";\n        powerBtn.classList.add('right');\n        for (let btn of [startBtn, strictBtn, modesBtn]) {\n          btn.addEventListener('click', processFunctionButton);\n        }\n      } else {\n        status.textContent = \"Off\";\n        powerBtn.classList.remove('right');\n        stopGame();\n      }\n    }\n    function musicTapError() {\n      status.textContent = \"YOU MISS!!\";\n      console.log(self.strict);\n      if (self.strict) {\n        resetGame();\n      } else {\n        self.playerMiss = true;\n        self.turn--;\n        window.setTimeout(self.cpuTurn, 200);\n      }\n    }\n    function processMusicTap(e) {\n      console.log(\"Se ejecuta processMusicTap\");\n      console.log(e);\n      console.log(musicBtns);\n      console.log(\"playerTap: \" + self.currentPlayerTap);\n      var tapped = e.target.getAttribute(\"data-btn\");\n      var snd = snds[tapped];\n      snd.play();\n      snd.on('complete', function(){\n        console.log(\"Al completar sonido → tapped: \"+tapped+\" taps[\"+self.currentPlayerTap+\"]: \"+self.taps[self.currentPlayerTap] +\" turn: \"+ self.turn);\n        if (tapped === self.taps[self.currentPlayerTap]) {\n          console.log(\"Correct button pressed\");\n          self.currentPlayerTap++;\n          console.log(\"playerTap: \" + self.currentPlayerTap, \"turn: \"+ self.turn);\n          if (self.currentPlayerTap === self.turn) {\n            console.log(\"Lista de taps mostrada al completar sonido y alcanzar el final del turno del jugador:\");\n            console.log(self.taps);\n            for (let btn of musicBtns) {\n              btn.removeEventListener('click', processMusicTap);\n            }\n            window.setTimeout(self.cpuTurn, 200);\n          }\n        } else {\n          console.log(\"Al completar el sonido y pulsarse botón erroneamente, tapped !== self.taps[playerTap] →  tapped: \"+tapped+\" taps[\"+self.currentPlayerTap+\"]: \"+self.taps[self.currentPlayerTap] +\" turn: \"+ self.turn);\n          for (let btn of musicBtns) {\n            btn.removeEventListener('click', processMusicTap);\n          }\n          musicTapError();\n        }\n      }, null, true);\n    }\n    function updateLed(value=\"--\") {\n      led.textContent = value;\n    }\n    function baseReset(){\n      window.clearInterval(self.cpuInterval);\n      self.cpuInterval = null;\n      cs.stop();\n      musicBtns.forEach(unpressed);\n      // borrar los escuchadores de eventos click\n      for (let btn of musicBtns) {\n        btn.removeEventListener('click', processMusicTap);\n      }\n      updateLed();\n      self.turn = 0;\n      self.taps = [];\n      self.currentPlayerTap = null;\n      self.playerMiss = false;\n    }\n    function stopGame() {\n      baseReset();\n      for (let btn of [startBtn, strictBtn]) {\n        btn.removeEventListener('click', processFunctionButton);\n      }\n      self.on = false;\n      self.started = false;\n      modesBtn.addEventListener('click', processFunctionButton);\n    }\n    function resetGame() {\n      baseReset();\n      self.on = true;\n      self.start();\n    }\n  };\n\n  // launch the game\n  var simonGame = new simon();\n})();\n"],"sourceRoot":"/source/"}